model:
  weights: yolov8n.pt
  device: 0
  imgsz: 640
tracking:
  conf: 0.25
  iou: 0.45
  max_det: 1000
  tracker_config: configs/tracker/bytetrack.yaml
roi:
  # 不再使用固定路径，而是根据视频名动态生成
  # path: data/rois/ec.json (注释掉或删除)
  
  enable: true
  # 模式必须改为 dynamic_seg 以启用新逻辑
  mode: dynamic_seg
  
  # 动态分割模型的配置
  dynamic_seg:
    # 指向您训练好的模型
    model: weights/lane_seg_v2.pt
    device: 0
    imgsz: 640
    conf: 0.25
    class_id: 0

  # 【这里就是您找不到的过滤参数，请完整复制进去】
  dynamic_filters:
    # 1. 面积过滤：防止碎渣误报
    # 如果报错 area_out_of_range 太多，就把这个由 0.015 改小到 0.001
    min_area_ratio: 0.0001
    max_area_ratio: 0.4

    # 2. 位置过滤：防止副驾视角偏差
    # 如果报错 centroid_out_of_position 太多，就把这个由 0.7 改小到 0.5
    min_centroid_x_ratio: 0.4
    max_centroid_y_ratio: 0.98

    # 3. 稳定性过滤：防抖动
    max_centroid_jump: 0.15

    # 4. 状态机：允许掉线的帧数
    # 调大这个值（比如 10），可以让车道识别更不容易断，哪怕被车挡住也能坚持一会
    bad_streak_tolerance: 60
    good_streak: 5
# ... 下面的 events, render 等保持不变 ...
events:
  min_frames_in: 5
  min_frames_out: 30
render:
  show_tracks: true
  show_footpoints: true
data:
  videos_dir: data/videos
  rois_dir: data/rois
outputs:
  root: data/outputs
  video_filename: ec_vis.mp4
  csv_filename: ec.csv
  clip_dir: clips
  clip_pre_seconds: 1.0
  clip_post_seconds: 1.0
